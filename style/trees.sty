\ProvidesPackage{trees}

%Import Packages and Libraries
\usepackage{tikz}
\usepackage{xcolor}
\usepackage{amsmath}
\usetikzlibrary{calc}
\usetikzlibrary{shapes.misc}
\usetikzlibrary{shapes.symbols}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{decorations}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{external}

%Define symbol colors.
\colorlet{symbols}{black}
\colorlet{absymbols}{blue}
%Define non-tree symbols
\def\symbol#1{\textcolor{symbols}{#1}} %command to set symbol colors quickly later.
\def\absymbol#1{\textcolor{absymbols}{#1}}

\def\1{\mathbf{\symbol{1}}}
\def\X#1{\symbol{X_{#1}}}
\def\r1{\mathbf{\absymbol{1}}}
\def\Xr#1{\absymbol{X_{#1}}}
\def\SymXi{\symbol{\Xi}}
\def\AbSymXi{\absymbol{\Xi}}
\def\Abtau{\absymbol{\tau}}
\def\Abint#1{\absymbol{\mathcal{I}(#1)}}
\def\Id{\mathrm{Id}}
\def\AbV{\absymbol{\mathcal{V}}}

\makeatletter
\def\DeclareSymbol#1#2#3{%
	\expandafter\gdef\csname MH@symb@#1\endcsname{\tikzsetnextfilename{symbol#1}%
	\tikz[baseline=#2,scale=0.15,draw=symbols,line join=round,line cap=round]{#3}}%
	%
	\expandafter\gdef\csname MH@symb@#1s\endcsname{\scalebox{0.75}{\tikzsetnextfilename{symbol#1}%
	\tikz[baseline=#2,scale=0.15,draw=symbols,line join=round,line cap=round]{#3}}}%
	%
	\expandafter\gdef\csname MH@symb@#1ss\endcsname{\scalebox{0.65}{\tikzsetnextfilename{symbol#1}%
	\tikz[baseline=#2,scale=0.15,draw=symbols,line join=round,line cap=round]{#3}}}%
	}
\def\<#1>{\ifmmode\mathchoice{\csname MH@symb@#1\endcsname}{\csname MH@symb@#1\endcsname}{\csname MH@symb@#1s\endcsname}{\csname MH@symb@#1ss\endcsname}\else\csname MH@symb@#1\endcsname\fi}
\makeatother


\def\DeclareAbSymbol#1#2#3{\expandafter\gdef\csname MH@symb@#1\endcsname{\tikz[baseline=#2,scale=0.15,draw=absymbols]{#3}}}

\tikzset{dot/.style={circle,fill=symbols,draw=symbols,inner sep=0pt,minimum size=0.5mm}}
\DeclareSymbol{X}{-2.4}{\node[dot] {};}
\DeclareSymbol{0}{0}{\node[dot]}
\DeclareSymbol{1}{0}{\draw[white] (-.5,0) -- (.5,0); \draw (0,0)  -- (0,1.5) node[dot] {};}
\DeclareSymbol{2}{0}{\draw (-0.5,1.5) node[dot] {} -- (0,0) -- (0.5,1.5) node[dot] {};}
\DeclareSymbol{3}{0}{\draw (0,0) -- (0,1.5) node[dot] {}; \draw (-.7,1.3) node[dot] {} -- (0,0) -- (.7,1.3) node[dot] {};}
\DeclareSymbol{31}{-3}{\draw (0,0) -- (0,-1) -- (1,0) node[dot] {}; \draw (0,0) -- (0,1.2) node[dot] {}; \draw (-.7,1) node[dot] {} -- (0,0) -- (.7,1) node[dot] {};}
\DeclareSymbol{30}{-3}{\draw (0,0) -- (0,-1); \draw (0,0) -- (0,1.2) node[dot] {}; \draw (-.7,1) node[dot] {} -- (0,0) -- (.7,1) node[dot] {};}
\DeclareSymbol{32}{-3}{\draw (0,0) -- (0,-1); \draw (1,0) node[dot] {} -- (0,-1) -- (-1,0) node[dot] {}; \draw (0,0) -- (0,1.2) node[dot] {}; \draw (-.7,1) node[dot] {} -- (0,0) -- (.7,1) node[dot] {};}
\DeclareSymbol{32b}{-4.3}{\draw (0,0.5) -- (0,-1); \draw (1,0) node[dot] {} -- (0,-1) -- (-1,0) node[dot] {};}
\DeclareSymbol{22}{-3}{\draw (0,0.3) -- (0,-1); \draw (1,0) node[dot] {} -- (0,-1) -- (-1,0) node[dot] {};\draw (-.7,1) node[dot] {} -- (0,0.3) -- (.7,1) node[dot] {};}
\DeclareSymbol{20}{-3}{\draw (0,0) -- (0,-1);\draw (-.7,1) node[dot] {} -- (0,0) -- (.7,1) node[dot] {};}
\DeclareSymbol{12}{-3}{\draw (0,0.3) -- (0,-1); \draw (1,0) node[dot] {} -- (0,-1) -- (-1,0) node[dot] {};\draw (-.7,1) node[dot] {} -- (0,0.3);}
\DeclareSymbol{10}{-3}{\draw (0,0.3) -- (0,-1);\draw (-.7,1) node[dot] {} -- (0,0.3);}
\DeclareSymbol{21}{-3}{\draw (0,0.3) -- (0,-1) -- (1,0) node[dot] {};\draw (-.7,1) node[dot] {} -- (0,0.3) -- (.7,1) node[dot] {};}
%symbols in regularity structure
\tikzset{abdot/.style={circle,fill=absymbols,draw=absymbols,inner sep=0pt,minimum size=0.5mm}}
\DeclareAbSymbol{Xr}{-2.4}{\node[abdot] {};}
\DeclareAbSymbol{0r}{0}{\node[abdot]}
\DeclareAbSymbol{1r}{0}{\draw[white] (-.5,0) -- (.5,0); \draw (0,0)  -- (0,1.5) node[abdot] {};}
\DeclareAbSymbol{2r}{0}{\draw (-0.5,1.5) node[abdot] {} -- (0,0) -- (0.5,1.5) node[abdot] {};}
\DeclareAbSymbol{3r}{0}{\draw (0,0) -- (0,1.5) node[abdot] {}; \draw (-.7,1.3) node[abdot] {} -- (0,0) -- (.7,1.3) node[abdot] {};}
\DeclareAbSymbol{31r}{-3}{\draw (0,0) -- (0,-1) -- (1,0) node[abdot] {}; \draw (0,0) -- (0,1.2) node[abdot] {}; \draw (-.7,1) node[abdot] {} -- (0,0) -- (.7,1) node[abdot] {};}
\DeclareAbSymbol{30r}{-3}{\draw (0,0) -- (0,-1); \draw (0,0) -- (0,1.2) node[abdot] {}; \draw (-.7,1) node[abdot] {} -- (0,0) -- (.7,1) node[abdot] {};}
\DeclareAbSymbol{32r}{-3}{\draw (0,0) -- (0,-1); \draw (1,0) node[abdot] {} -- (0,-1) -- (-1,0) node[abdot] {}; \draw (0,0) -- (0,1.2) node[abdot] {}; \draw (-.7,1) node[abdot] {} -- (0,0) -- (.7,1) node[abdot] {};}
\DeclareAbSymbol{32br}{-4.3}{\draw (0,0.5) -- (0,-1); \draw (1,0) node[abdot] {} -- (0,-1) -- (-1,0) node[abdot] {};}
\DeclareAbSymbol{22r}{-3}{\draw (0,0.3) -- (0,-1); \draw (1,0) node[abdot] {} -- (0,-1) -- (-1,0) node[abdot] {};\draw (-.7,1) node[abdot] {} -- (0,0.3) -- (.7,1) node[abdot] {};}
\DeclareAbSymbol{20r}{-3}{\draw (0,0) -- (0,-1);\draw (-.7,1) node[abdot] {} -- (0,0) -- (.7,1) node[abdot] {};}
\DeclareAbSymbol{12r}{-3}{\draw (0,0.3) -- (0,-1); \draw (1,0) node[abdot] {} -- (0,-1) -- (-1,0) node[abdot] {};\draw (-.7,1) node[abdot] {} -- (0,0.3);}
\DeclareAbSymbol{10r}{-3}{\draw (0,0.3) -- (0,-1);\draw (-.7,1) node[abdot] {} -- (0,0.3);}
\DeclareAbSymbol{21r}{-3}{\draw (0,0.3) -- (0,-1) -- (1,0) node[abdot] {};\draw (-.7,1) node[abdot] {} -- (0,0.3) -- (.7,1) node[abdot] {};}


